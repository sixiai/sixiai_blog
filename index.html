<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å››å¤•çš„åšå®¢å°ç«™</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <i class="fas fa-code"></i>
                <span>å››å¤•çš„åšå®¢</span>
            </a>
            <div class="nav-menu">
                <a href="index.html" class="nav-link active">
                    <i class="fas fa-home"></i> é¦–é¡µ
                </a>
                <a href="archives.html" class="nav-link">
                    <i class="fas fa-archive"></i> å½’æ¡£
                </a>
                <a href="tags.html" class="nav-link">
                    <i class="fas fa-tags"></i> æ ‡ç­¾
                </a>
                <a href="about.html" class="nav-link">
                    <i class="fas fa-user"></i> å…³äº
                </a>
            </div>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero åŒºåŸŸ -->
    <header class="hero">
        <div class="hero-content">
            <div class="hero-avatar">
                <img src="https://avatars.githubusercontent.com/u/52995168?v=4" alt="Avatar">
            </div>
            <h1 class="hero-title">å››å¤•çš„åšå®¢å°ç«™</h1>
            <p class="hero-subtitle">ä¸€é¢—å¿«ä¹ç å†œ ğŸš€</p>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number" id="postCount">8</span>
                    <span class="stat-label">æ–‡ç« </span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="tagCount">4</span>
                    <span class="stat-label">æ ‡ç­¾</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">42k+</span>
                    <span class="stat-label">è®¿é—®ï¼ˆä»¥è¿™ä¸ªä¸ºç›®æ ‡dogeï¼‰</span>
                </div>
            </div>
            <div class="hero-social">
                <a href="https://github.com/sixiai" target="_blank" class="social-link">
                    <i class="fab fa-github"></i>
                </a>
            </div>
        </div>
        <div class="hero-wave">
            <svg viewBox="0 0 1440 120" preserveAspectRatio="none">
                <path d="M0,64 C480,150 960,-20 1440,64 L1440,120 L0,120 Z"></path>
            </svg>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <div class="container">
            <!-- æ ‡ç­¾ç­›é€‰ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰ -->
            <div class="tag-filter" id="tagFilter">
                <button class="tag-btn active" data-tag="all">å…¨éƒ¨</button>
                <!-- å…¶ä»–æ ‡ç­¾æŒ‰é’®å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
            </div>

            <!-- æ–‡ç« åˆ—è¡¨ -->
            <div class="posts-grid" id="postsGrid">
                <!-- æ–‡ç« å¡ç‰‡å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>åŠ è½½ä¸­...</span>
                </div>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <p>Â© 2025 å››å¤•çš„åšå®¢å°ç«™</p>
                    <p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</p>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/sixiai" target="_blank">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- å›åˆ°é¡¶éƒ¨ -->
    <button class="back-to-top" id="backToTop" title="å›åˆ°é¡¶éƒ¨">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="js/main.js"></script>
    <script>
        // ä» posts.json ç»Ÿä¸€åŠ è½½æ–‡ç« æ•°æ®
        let tagsConfig = {};  // å­˜å‚¨æ ‡ç­¾é…ç½®
        
        async function loadPosts() {
            try {
                const response = await fetch('posts/posts.json');
                const data = await response.json();
                const postsData = data.posts;
                tagsConfig = data.tags || {};  // ä¿å­˜æ ‡ç­¾é…ç½®
                
                renderTagFilter();  // åŠ¨æ€ç”Ÿæˆæ ‡ç­¾ç­›é€‰æŒ‰é’®
                renderPosts(postsData);
                setupTagFilter(postsData);
                
                // è‡ªåŠ¨æ›´æ–°æ–‡ç« æ•°å’Œæ ‡ç­¾æ•°
                document.getElementById('postCount').textContent = postsData.length;
                document.getElementById('tagCount').textContent = Object.keys(data.tags).length;
                
            } catch (error) {
                console.error('åŠ è½½æ–‡ç« å¤±è´¥:', error);
                document.getElementById('postsGrid').innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</p>
                    </div>
                `;
            }
        }

        // åŠ¨æ€ç”Ÿæˆæ ‡ç­¾ç­›é€‰æŒ‰é’®
        function renderTagFilter() {
            const tagFilter = document.getElementById('tagFilter');
            const tagButtons = Object.entries(tagsConfig).map(([tagId, tagInfo]) => {
                return `<button class="tag-btn" data-tag="${tagId}" style="--tag-color: ${tagInfo.color}">${tagInfo.name}</button>`;
            }).join('');
            
            tagFilter.innerHTML = `
                <button class="tag-btn active" data-tag="all">å…¨éƒ¨</button>
                ${tagButtons}
            `;
        }

        // æ¸²æŸ“æ–‡ç« å¡ç‰‡
        function renderPosts(posts, filterTag = 'all') {
            const grid = document.getElementById('postsGrid');
            const filteredPosts = filterTag === 'all' 
                ? posts 
                : posts.filter(p => p.tags.includes(filterTag));
            
            if (filteredPosts.length === 0) {
                grid.innerHTML = `
                    <div class="no-posts">
                        <i class="fas fa-inbox"></i>
                        <p>æš‚æ— ç›¸å…³æ–‡ç« </p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredPosts.map((post, index) => `
                <article class="post-card" style="animation-delay: ${index * 0.1}s" data-tags="${post.tags.join(',')}">
                    <div class="post-card-header">
                        <span class="post-date">
                            <i class="far fa-calendar-alt"></i>
                            ${post.date}
                        </span>
                        <div class="post-tags">
                            ${post.tags.map(tag => `<span class="tag" style="background: ${getTagColor(tag)}20; color: ${getTagColor(tag)}">${getTagName(tag)}</span>`).join('')}
                        </div>
                    </div>
                    <h2 class="post-title">
                        <a href="post.html?id=${post.id}">${post.title}</a>
                    </h2>
                    <p class="post-excerpt">${post.excerpt}</p>
                    <a href="post.html?id=${post.id}" class="read-more">
                        é˜…è¯»å…¨æ–‡ <i class="fas fa-arrow-right"></i>
                    </a>
                </article>
            `).join('');
        }

        // è·å–æ ‡ç­¾æ˜¾ç¤ºåç§°ï¼ˆä» tagsConfig è¯»å–ï¼‰
        function getTagName(tag) {
            return tagsConfig[tag]?.name || tag;
        }

        // è·å–æ ‡ç­¾é¢œè‰²ï¼ˆä» tagsConfig è¯»å–ï¼‰
        function getTagColor(tag) {
            return tagsConfig[tag]?.color || '#6366f1';
        }

        // è®¾ç½®æ ‡ç­¾ç­›é€‰
        function setupTagFilter(posts) {
            const tagBtns = document.querySelectorAll('.tag-btn');
            tagBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    tagBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderPosts(posts, btn.dataset.tag);
                });
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', loadPosts);
    </script>
</body>
</html>
